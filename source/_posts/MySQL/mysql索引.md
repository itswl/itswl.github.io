---
title: mysql索引
date: 2020-03-14 21:57:47
tags:
categories: mysql学习
---


mysql   B+树

正确创建合适的索引是数据库优化的基础

## 索引本质
索引为了 加速对表中数据行的检索 而创建的 一种**分散存储**的**数据结构**

在 RDBMS系统中  数据的索引都是  硬盘级索引，只有一少部分在内存中

hash索引  等值匹配非常快，但范围查询不可以


二叉树性结构存在问题 
1. 树的高度的太高,IO次数太多
2. 页为单位，默认4K   MYSQL默认 16K，  可以加载多个关键字，但一次加载关键字太少

### B 树 （多路 平衡 树）
关键字的个数 = 路数 -1

关键字都有数据区,会多余读取


### B + 树 （加强版 多路 平衡 树）
 
mysql 匹配过程 采用了 左闭合 的比较规则

读取的关键字 以及 子节点的引用

只有最后一层有数据区

IO能力， 排序能力， 扫表能力，查询效率稳定可靠

## 索引
离散性越好，列的选折性就越好，越适合作为索引。离散性差的作为索引适得其反（例如性别）

### 聚集索引 ： 数据库 表中数据的 物理顺序 与 键值 的逻辑（索引） 顺序相同

### 主键索引  ： 

### 辅助索引  ： 

### 三星索引 ：

### 联合索引：  
联合索引 ： eg: `create index idx_name_phoneNum on  user(name,phoneNum,age)`
单列索引 : 一种特殊的联合索引 `create index idx_name  on  user(name)`

联合索引 用到 范围匹配后面的索引  就会失效

###  最左匹配
对 索引中关键字的对比 ，从左往右 依次进行比较  abc < acd
所以使用 like %abc %在左边 不好，因为会查询整个 B+tree

